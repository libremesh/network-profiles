# Beware this file is NOT supposed to be edited by the end user, modify /etc/config/lime instead
# If the same option or list is defined both in /etc/config/lime and lime-defaults file, the former will prevail
# Beware this file is not supposed to store interface specific configuration, like "config net eth0"

# Read the documentation in /etc/config/lime.example file
# and on https://libremesh.org

####
#
# este perfil tiene por default los valores de la nube bbone
#
# cada nodo tiene que tener en su /etc/config/lime:
# hostname, mainipv4 y mainipv6, canales 2.4 y 5Ghz, wifi modes
#
###

config lime system
	option hostname 'lbl-%M4%M5%M6'
	option domain 'red.labolsa.libre.org.ar'

config lime network
	option main_ipv4_address '10.5.32.0/21'
	option main_ipv6_address '2801:01e8:2:4::/64'
	list protocols adhoc
	list protocols lan
	list protocols anygw
	list protocols batadv:%N1
	list protocols bmx6:13
	list protocols olsr:14
	list protocols olsr6:15
	list protocols olsr2:16
	list protocols babeld:17
	list protocols bmx7:18

config lime wifi
	option channel_2ghz '1'
	list channel_5ghz '48'
	list channel_5ghz '100'
	option country 'TZ'
	list modes 'apname_2ghz'
	list modes 'adhoc'
	option ap_ssid 'labolsa.libre.org.ar'
	option apname_ssid 'LBL/%H'

config generic_uci_config location
	list uci_set libremap.settings.community='labolsa.libre.org.ar'
	list uci_set libremap.settings.community_lat='-31.73572'
	list uci_set libremap.settings.community_lon='-64.42238'

config generic_uci_config system_opts
	list uci_set "system.@system[0].timezone=ART3"
	list uci_set "system.@system[0].log_ip=10.5.1.4"

config generic_uci_config dropbear
	list uci_set "dropbear.@dropbear[0].RootPasswordAuth=off

config run_asset cron_defer_reboot
	option asset 'community/cron_defer_reboot'
	option when 'ATFIRSTBOOT'

config copy_asset authorized_keys
	option asset 'community/authorized_keys'
	option dst '/etc/dropbear'

config run_asset fix_authorized_keys_permissions
	option asset 'community/fix_authorized_keys_permissions'
	option when 'ATCONFIG'
